@{
    ViewBag.Title = "TechniciansList";
    Layout = "~/Views/Shared/_Layout_WithOutMenu.cshtml";
}

<script type="text/javascript">
    $(document).ready(function () {
        var woid = @ViewBag.id;
        var response = @ViewBag.response;
        var isResponse = '@ViewBag.isResponsible';
        var tid;
        $('#techId').on('change', function () {
            tid = $('#techId :selected').val();

            if ( $( '#techId :selected' ).val() != "-1" )
            {
                $( '#btnTransmitTechnicians' ).prop( 'disabled', false );
            }
            else
            {
                $( '#btnTransmitTechnicians' ).prop( 'disabled', true );
            }
        });
        
        $('#btnTransmitTechnicians').on('click', function(){
            $(this).prop('disabled', true);
            $('#techId').prop('disabled', true);
            
            window.location.href = "@Url.Action("DispatchResponse", "DispatchResponse")" + "?workOrderId="+woid+"&techId="+ tid+"&response="+response+"&isResponsible="+isResponse;

        });
    });
</script>
@*@using (Html.BeginForm("DispatchResponse", "DispatchResponse", FormMethod.Post, null))
{*@
    <section class="container-fluid white-bg pad fixedSecond header">
        <div class="row vertical-align">
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-3">
                    </div>
                    <div class="col-md-3">
                        @Html.DropDownList("techId", new SelectList(ViewBag.techlist, "TechID", "PreferredProvider"), new { @class = "form-control SearchPanelControl" })
                    </div>
                    <div class="col-md-3">
                        <input type="submit" id="btnTransmitTechnicians" style="display: inline-block;margin-right:5px;float:left;" class="btn btn-primary" value="Transmit" disabled />
                    </div>
                    <div class="col-md-3">
                    </div>

                </div>

            </div>
        </div>
    </section>
@*}*@

